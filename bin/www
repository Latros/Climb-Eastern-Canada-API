#!/usr/bin/env node

var debug = require('debug')('CEC-API');
var app = require('../app');
var models = require("../models");

app.set('port', process.env.PORT || 3000);

models.sequelize.sync().then(function () {
  var server = app.listen(app.get('port'), function() {
    console.log('\033[2J');
    var asciiUnicorn = "                                                    /"
    + "\n                                                  .7"
    + "\n                                       \       , //"
    + "\n                                       |\.--._/|//"
    + "\n                                      /\ ) ) ).'/"
    + "\n                                     /(  \  // /"
    + "\n                                    /(   J`((_/ \""
    + "\n                                   / ) | _\     /"
    + "\n                                  /|)  \  eJ    L"
    + "\n                                 |  \ L \   L   L"
    + "\n                                /  \  J  `. J   L"
    + "\n                                |  )   L   \/   \""
    + "\n                               /  \    J   (\   /"
    + "\n             _....___         |  \      \   \```"
    + "\n      ,.._.-'        '''--...-||\     -. \   \""
    + "\n    .'.=.'                    `         `.\ [ Y"
    + "\n   /   /                                  \]  J"
    + "\n  Y / Y                                    Y   L"
    + "\n  | | |          \                         |   L"
    + "\n  | | |           Y                        A  J"
    + "\n  |   I           |                       /I\ /"
    + "\n  |    \          I             \        ( |]/|"
    + "\n  J     \         /._           /        -tI/ |"
    + "\n   L     )       /   /'-------'J           `'-:."
    + "\n   J   .'      ,'  ,' ,     \   `'-.__          \""
    + "\n    \ T      ,'  ,'   )\    /|        ';'---7   /"
    + "\n     \|    ,'L  Y...-' / _.' /         \   /   /"
    + "\n      J   Y  |  J    .'-'   /         ,--.(   /"
    + "\n       L  |  J   L -'     .'         /  |    /\""
    + "\n       |  J.  L  J     .-;.-/       |    \ .' /"
    + "\n       J   L`-J   L____,.-'`        |  _.-'   |"
    + "\n        L  J   L  J                  ``  J    |"
    + "\n        J   L  |   L                     J    |"
    + "\n         L  J  L    \                    L    \""
    + "\n         |   L  ) _.'\                    ) _.'\""
    + "\n         L    \('`    \                  ('`    \""
    + "\n          ) _.'\`-....'                   `-....'"
    + "\n         ('`    \""
    + "\n          `-.___/\n\n"
    + "\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////"
    + "\nNow leah knows exactly when her server is fully started so she doesn't have to hit enter a few times!!!"
    + "\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////";
    console.log(asciiUnicorn);
    debug('Express server listening on port ' + server.address().port);
  });
});